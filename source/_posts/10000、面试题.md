---
title: 10000、面试题
date: 2021-05-13 10:48:38
tags:
---

#### promise 实现红绿灯

```js
let light = document.getElementById("light");

function red() {
  return new Promise((res, rej) => {
    light.style.backgroundColor = "red";
    setTimeout(() => {
      res(yellow());
    }, 2000);
  });
}

function yellow() {
  return new Promise((res, rej) => {
    light.style.backgroundColor = "yellow";
    setTimeout(() => {
      res(green());
    }, 1000);
  });
}

function green() {
  return new Promise((res, rej) => {
    light.style.backgroundColor = "green";
    setTimeout(() => {
      res(red());
    }, 3000);
  });
}

red();

简化写法;
let light = document.querySelector(".light");
function lightChange(duration, color) {
  return new Promise((res, rej) => {
    light.style.backgroundColor = color;
    setTimeout(res, duration);
  });
}

async function index() {
  while (1) {
    await lightChange(2000, "red");
    await lightChange(1000, "yellow");
    await lightChange(3000, "green");
  }
}

index();
```
